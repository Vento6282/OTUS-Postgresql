# Виды индексов. Работа с индексами и оптимизация запросов.

Занятие от 03.06.2024

## Выполнение домашнего задания:

 - Создать индекс к какой-либо из таблиц вашей БД

Текст запроса:
```
CREATE INDEX IDX_number ON index_table(number);
```

 - Прислать текстом результат команды explain, в которой используется данный индекс

Вывод результата запроса ***explain select * from index_table where number = 10;***
```
                                  QUERY PLAN                                  

------------------------------------------------------------------------------

 Index Scan using idx_number on index_table  (cost=0.42..2.94 rows=1 width=7)

   Index Cond: (number = 10)
```

 - Реализовать индекс для полнотекстового поиска

Запрос добавления столбца tsvector с автоматическим заполнением для
полнотекстового поиска:
```
ALTER TABLE index_table_text ADD COLUMN content_tsvector TSVECTOR GENERATED ALWAYS AS (to_tsvector('english', content)) STORED;
```
Запрос создания GIN индекса для столбца tsvector:
```
CREATE INDEX IDX_content_tsvector ON index_table_text USING gin (content_tsvector);
```

 - Реализовать индекс на часть таблицы или индекс на поле с функцией

Запрос создания индекса на часть таблицы:
```
CREATE INDEX IDX_number_above_10 ON index_table(number) WHERE number > 10;
```
Запрос создания индекса на поле с функцией:
```
CREATE INDEX IDX_text_lower ON index_table(LOWER(text));
```
 - Создать индекс на несколько полей

Текст запроса:
```
 CREATE INDEX IDX_number_text ON index_table(number, text);
``` 
 - Написать комментарии к каждому из индексов

***Полнотекстовый индекс***\
Индекс необходим для более быстрого поиска записей при поиске по словам, где в поле может находиться несколько слов.

***Индекс на часть таблицы***\
При использовании такого индекса будет использоваться меньше строк таблицы, что ускорит время выполнения запроса.

***Индекс с функцией***\
Для более удобного поиска в индексе к полю можно применять функцию. Этим можно воспользоваться для приведения поля к одному виду, например, привести поле с e-mail к нижнему регистру.

***Составной индекс***\
Можно создать индекс со всеми полями, которые используются в запросе. В таком случае запросу не требуется обращаться с самой таблице, уменьшая потребляемые ресурсы, что ускорит время выполнения запроса, 

 - Описать что и как делали и с какими проблемами столкнулись
 